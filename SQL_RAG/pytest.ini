[pytest]
# Pytest configuration for SQL RAG Testing Suite

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Markers for categorizing tests
markers =
    e2e: End-to-end integration tests
    integration: True integration tests (real APIs, real DB, no mocks) - requires API keys
    api: API endpoint tests (FastAPI TestClient with real services) - requires API keys
    chat: Chat conversation flow tests
    sql: SQL generation and execution tests
    catalog: Query catalog browsing tests
    agent: Agent workflow tests (@explain, @create, @schema, @longanswer)
    slow: Tests that take longer to execute (LLM API calls)
    mock: Tests using mocked dependencies
    requires_bigquery: Tests requiring BigQuery credentials
    requires_vector_store: Tests requiring loaded vector store
    bigquery: Tests that execute real BigQuery queries - requires credentials
    firestore: Tests that use Firestore for data persistence - requires credentials

# Output options
addopts =
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    --color=yes
    -ra

# Coverage options (optional, uncomment to enable)
# --cov=rag_app
# --cov-report=term-missing
# --cov-report=html

# Logging
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Timeout for tests (in seconds)
# Uncomment if pytest-timeout is installed
# timeout = 300
# timeout_method = thread

# Parallel execution (uncomment if pytest-xdist is installed)
# addopts = -n auto
