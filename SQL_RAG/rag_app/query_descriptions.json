{
  "analytics/market_basket_analysis.sql": "This SQL query performs market basket analysis to identify product pairs frequently bought together for cross-selling opportunities over the past 180 days. It calculates metrics such as support (probability of both products being bought), confidence (probability of B given A), and lift (how much more likely is B when A is purchased). The results show which product combinations have strong, moderate, or weak associations based on these metrics, with a focus on maximizing revenue through targeted cross-selling strategies.\n\nThe query involves three main CTEs: 'order_products' joins sales transactions with products and categories to calculate item revenue; 'product_pairs' identifies product pairs bought together while avoiding duplicates and self-pairings, filtering for those appearing in at least 5 orders; 'product_totals' calculates the total number of orders each product appears in. The final CTE 'association_metrics' combines these results to compute support, confidence, lift, and average combined revenue for each product pair, categorizing their association strength based on lift and confidence thresholds.",
  "analytics/product_performance.sql": "This SQL query analyzes the sales performance of products across different dimensions such as category, brand, and individual product metrics over the past year. It calculates key metrics like total quantity sold, gross revenue, average selling price, margin percentage, and ranks products based on net revenue and quantity sold. The final output includes each product's ID, name, SKU, sales performance rankings, days since last sale, and a performance tier classification (e.g., top performer or poor performer) along with its sales velocity status (stale, slow-moving, active).",
  "customer_management/customer_analysis.sql": "This SQL query analyzes customer purchasing behavior to determine their lifetime value, spending patterns, and engagement level by examining transaction data from the sales_transactions table. It calculates metrics such as total orders, average order value, and customer lifespan in days for each customer. Additionally, it identifies preferred product categories based on spending and assigns customers to tiers (VIP, Gold, Silver, Bronze) and status levels (Active, At Risk, Dormant, Inactive).",
  "customer_management/loyalty_program.sql": "This SQL query analyzes a loyalty program by tracking customer points earned and redeemed, their current tier status, balance category, and the duration in their current tier to assess program effectiveness. It uses tables like 'loyalty_transactions', 'customers', and 'customer_tiers' for metrics such as total points earned/redeemed, current point balance, and days spent in a specific loyalty tier.\n\nThe query calculates the redemption rate percentage of points redeemed to points earned, categorizes customers into balances (High, Medium, Low, Minimal) based on their current point balance, and identifies the most recent customer tier for each member by using window functions and joins between related tables. The results are ordered by the highest current point balance.",
  "database_schema/create_tables.sql": "This SQL query creates a retail management system database schema with tables for product categories, brands, suppliers, products, stores, customers, and sales transactions. It establishes relationships between these entities using foreign keys and indexes to optimize search performance. The key metrics include unit cost, retail price, weight, and volume of products; store details such as type, square footage, and opening date; customer information like contact method preferences and loyalty program membership status; and sales transaction data including order IDs and associated customer and store details.\n\nThe purpose is to enable efficient management of a retail business by tracking product inventory, supplier relationships, brand associations, store locations, customer profiles, and sales transactions for analysis and decision-making.",
  "financial_reports/profit_loss_statement.sql": "This SQL query generates a comprehensive Profit & Loss (P&L) statement for the past two years by breaking down revenue and costs across different categories and stores. It calculates gross sales, total discounts, net sales, tax collected, cost of goods sold (COGS), units sold, gross profit, gross margin percentage, and various operating expenses like rent, salaries, marketing, utilities, insurance, and maintenance for each month within the specified time frame.\n\nTables used:\n- sales_transactions: stores information about product sales transactions.\n- products: contains details of individual products.\n- product_categories: defines categories to which products belong.\n- stores: holds data on different retail locations.\n- operating_expenses: lists various expenses incurred by the business.\n\nMetrics calculated:\n- Gross Revenue, Total Discounts, Net Sales, and Sales Tax Collected (revenue metrics)\n- Cost of Goods Sold (COGS), Units Sold (cost metrics)\n- Rent Expense, Salary Expense, Marketing Expense, Utilities Expense, Insurance Expense, Mainteninas",
  "inventory_management/inventory_turnover.sql": "This SQL query analyzes the inventory turnover and identifies slow-moving stock for products sold in the last year, using sales data, current stock levels, and unit costs to calculate metrics such as units sold, average inventory value, inventory turnover ratio, days to sell inventory, and movement category.\n\nKey tables:\n- products (product_id, product_name, sku)\n- product_categories (category_id, category_name)\n- inventory_movements (product_id, net_movement, total_sold, sale_transactions)\n- sales_transactions (order_date, quantity, unit_cost)\n- inventory_snapshots (product_id, current_stock)\n\nMetrics:\n- Units sold year to date (units_sold_ytd)\n- Average inventory level (avg_inventory_level)\n- Cost of goods sold annually (cogs_annual)\n- Inventory turnover ratio (inventory_turnover_ratio)\n- Days to sell inventory (days_to_sell_inventory)\n- Movement category ('NO_SALES', 'SLOW_MOVING', 'NORMAL', or 'FAST_MOVING')",
  "inventory_management/stock_levels.sql": "This SQL query analyzes current stock levels and sales velocity to identify products that need restocking or have excess inventory. It calculates the average daily sales for each product over the past three months and compares it with available stock, reorder point, and maximum stock level to determine if a product requires immediate reorder, is low in stock, has an oversupply, or is within normal range. The query also provides inventory value based on unit cost and available stock for each product.\n\nTables: \n- sales_transactions (contains daily sales data)\n- inventory (current stock levels of products)\n- products (product details like name, SKU, category ID)\n- product_categories (category names associated with products)\n\nMetrics:\n- Average Daily Sales\n- Available Stock\n- Reorder Point\n- Maximum Stock Level\n- Days of Stock remaining before reordering\n- Inventory Value (unit cost multiplied by available stock)",
  "pricing_optimization/dynamic_pricing.sql": "This query analyzes the price elasticity and optimal pricing strategies for products sold in the last 90 days, using data from sales transactions, competitors' prices, and product categories. It calculates metrics such as average selling price, total quantity sold, revenue, price change percentage, quantity change percentage, and volatility of selling prices per product. Additionally, it compares these metrics with the average, minimum, and maximum prices from competitor data to identify pricing gaps and categorizes demand elasticity as inelastic, moderate elastic, or highly elastic. The final output includes information on each product's price gap compared to competition, optimal pricing category (premium, discount, or standard), and other key metrics for informed decision-making regarding dynamic pricing strategies.",
  "sales_reporting/daily_sales_summary.sql": "This SQL query generates a daily sales summary report for the past 30 days, grouping data by date, store ID, and product category. It calculates metrics such as total orders, unique customers, items sold, gross revenue, discounts applied, net revenue, and average order value per day, store, and category.",
  "sales_reporting/monthly_performance.sql": "This SQL query analyzes the sales performance of each store by comparing current month's revenue and order count with previous months for the past year. It calculates metrics such as total revenue growth percentage, order growth percentage, and average order value per customer to assess monthly sales trends.",
  "stored_procedures/inventory_procedures.sql": "This set of SQL procedures manages inventory for a business. The first procedure updates stock levels after sales by decreasing the quantity sold and adjusting the remaining stock in both 'current' and 'available' columns. It logs this sale as an inventory movement with details like product ID, store ID, type of movement (sale), quantity sold, timestamp, and a reference to the transaction that triggered it. The second procedure handles receiving inventory from purchase orders by adding or updating stock levels based on received quantities and associated costs, then logging the receipt as an inventory movement with relevant details including product ID, store ID, type of movement (receipt), quantity received, unit cost, timestamp, and reference to the purchase order. The third procedure facilitates transferring inventory between stores by checking if sufficient stock is available at the source before decrementing it and incrementing the destination's stock level; this process also logs the transaction with relevant details like product ID, store IDs involved, quantity transferred, timestamp, and reference to the transfer.",
  "supply_chain/supplier_performance.sql": "This SQL query analyzes supplier performance over the past year, evaluating their reliability, quality of products supplied, and cost-effectiveness. It calculates metrics such as total orders, average order value, delivery timeliness (on-time rate), product quality rating, defect rates, unit costs, and overall supplier score based on weighted factors including delivery performance, quality, defects, and consistency in delivery dates. The query categorizes suppliers into 'PREFERRED' or other classifications based on their performance scores.\n\nTables involved:\n- Suppliers (supplier_id, supplier_name)\n- Products (product_id, supplier_id, unit_cost)\n- Purchase Orders (purchase_order_id, supplier_id, order_date, delivery_date, promised_delivery_date, order_status, total_quantity)\n- Quality Control (quality_control_id, purchase_order_id, quality_rating, defect_quantity, received_quantity)\n\nMetrics calculated:\n- Total orders and products supplied by each supplier.\n- Average order value, delivery days, on-time delivery rate, late delivery average days.\n- Good quality deliveries percentage, average product quality rating, and defect rate.\n- Average unit cost and its variability.\n- Overall Supplier Score based on weighted factors: 30% for on-time delivery, 40% for quality, 20% for defects, and 10% for delivery consistency.",
  "analytics/user_behavior.sql": "This SQL query analyzes user behavior in the past 30 days by calculating metrics such as session duration and activity (page views, clicks, downloads) to categorize users into engagement levels ('Highly Engaged', 'Moderately Engaged', 'Lightly Engaged', or 'Inactive') based on their total sessions and average session duration. It helps identify user patterns for targeted marketing strategies.",
  "operations/daily_monitoring.sql": "This SQL query generates a daily report on the operational performance of a system by aggregating metrics from the 'system_metrics' table. It calculates total sessions, unique users, error rates, average and maximum response times, slow requests count, total data processed (in MB), and key performance indicators like fast response rate percentage and error rate percentage for today's date.",
  "reports/monthly_summary.sql": "This SQL query generates a monthly business summary report for the past year, tracking active users, total orders, revenue, and average order value. It calculates user and revenue growth percentages compared to the previous month using data from the 'business_transactions' table."
}