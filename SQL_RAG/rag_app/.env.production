# SQL RAG Application - Production Environment Configuration
# This file contains production-optimized settings for Google Cloud Run deployment

# ===== DEPLOYMENT ENVIRONMENT =====
ENVIRONMENT=production

# ===== EMBEDDING CONFIGURATION =====
# Use OpenAI for production (cloud-optimized, serverless-ready)
EMBEDDINGS_PROVIDER=openai

# OpenAI embedding model (cost-effective, high quality)
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# API keys will be injected via Google Secret Manager in Cloud Run
# Do not set them here - they are managed through deployment scripts
# OPENAI_API_KEY will be set via --set-secrets in Cloud Run deployment
# GEMINI_API_KEY will be set via --set-secrets in Cloud Run deployment

# ===== STREAMLIT CONFIGURATION =====
# Production Streamlit settings for Cloud Run
STREAMLIT_SERVER_ENABLE_CORS=false
STREAMLIT_SERVER_ENABLE_XSRF_PROTECTION=false
STREAMLIT_SERVER_HEADLESS=true
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false

# ===== PYTHON CONFIGURATION =====
# Production Python settings
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# ===== LOGGING CONFIGURATION =====
# Enable structured logging for Google Cloud Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# ===== PERFORMANCE CONFIGURATION =====
# Optimize for Cloud Run memory and CPU limits
FAISS_ALLOW_DANGEROUS_DESERIALIZATION=true
VECTOR_STORE_BATCH_SIZE=100
MAX_CONCURRENT_REQUESTS=80

# ===== CACHE CONFIGURATION =====
# Optimize caching for ephemeral Cloud Run containers
ENABLE_QUERY_CACHE=true
CACHE_TTL_SECONDS=3600
MAX_CACHE_SIZE_MB=100

# ===== SECURITY CONFIGURATION =====
# Production security settings
DISABLE_FILE_UPLOAD=true
ENABLE_API_KEY_VALIDATION=true
MAX_REQUEST_SIZE_MB=10

# ===== MONITORING CONFIGURATION =====
# Enable monitoring and health checks
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_PATH=/_stcore/health
METRICS_ENABLED=true

# ===== RESOURCE LIMITS =====
# Cloud Run resource optimization
MAX_MEMORY_USAGE_MB=1800  # Leave buffer for 2Gi Cloud Run limit
MAX_CPU_CORES=2
REQUEST_TIMEOUT_SECONDS=300
MAX_EMBEDDING_BATCH_SIZE=50

# ===== GOOGLE CLOUD SPECIFIC =====
# Google Cloud service configuration
GOOGLE_CLOUD_PROJECT_ID=${PROJECT_ID}
GOOGLE_CLOUD_REGION=us-central1
ENABLE_CLOUD_LOGGING=true
ENABLE_CLOUD_MONITORING=true

# ===== FEATURE FLAGS =====
# Production feature configuration
ENABLE_ANALYTICS_CACHE=true
ENABLE_HYBRID_SEARCH=true
ENABLE_QUERY_REWRITING=true
ENABLE_SCHEMA_INJECTION=true
ENABLE_CHAT_INTERFACE=true
ENABLE_CATALOG_PAGE=true

# ===== DATA CONFIGURATION =====
# Production data settings
DEFAULT_CSV_FILE=sample_queries_with_metadata.csv
DEFAULT_SCHEMA_FILE=sample_queries_metadata_schema.csv
ENABLE_DATA_VALIDATION=true
MAX_QUERIES_PER_BATCH=1000

# ===== FALLBACK CONFIGURATION =====
# Fallback settings if primary services are unavailable
ENABLE_GRACEFUL_DEGRADATION=true
FALLBACK_TO_BASIC_SEARCH=true
ENABLE_OFFLINE_MODE=false