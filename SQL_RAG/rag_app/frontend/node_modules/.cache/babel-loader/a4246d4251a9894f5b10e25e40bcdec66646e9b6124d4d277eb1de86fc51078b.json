{"ast":null,"code":"import api from'./api';export const chatService={// Send a message to the chat assistant\nasync sendMessage(request){try{console.log('Sending chat request:',request);const response=await api.post('/chat/',{message:request.message,agent_type:request.agentType,session_id:request.sessionId,user_id:request.userId});console.log('Chat response:',response.data);return{message:response.data.message,sessionId:response.data.session_id,timestamp:response.data.timestamp,agentType:response.data.agent_used,sqlQuery:response.data.sql_query,sqlResult:response.data.sql_result,sources:response.data.sources,tokenUsage:response.data.token_usage,contextUtilization:response.data.context_utilization};}catch(error){var _error$response,_error$response$data;console.error('Error sending chat message:',error);throw new Error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.detail)||error.message||'Failed to send message');}},// Create a new chat session\nasync createSession(userId){try{const response=await api.post('/chat/sessions',{user_id:userId});return{sessionId:response.data.session_id,message:response.data.message};}catch(error){var _error$response2,_error$response2$data;console.error('Error creating session:',error);throw new Error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.detail)||error.message||'Failed to create session');}},// Get session history\nasync getHistory(sessionId){try{const response=await api.get(\"/chat/sessions/\".concat(sessionId,\"/messages\"));return response.data.data;}catch(error){var _error$response3,_error$response3$data;console.error('Error getting history:',error);throw new Error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.detail)||error.message||'Failed to get history');}},// Get all sessions for a user\nasync getUserSessions(userId){try{const response=await api.get(\"/chat/sessions/\".concat(userId));return response.data.data;}catch(error){var _error$response4,_error$response4$data;console.error('Error getting user sessions:',error);throw new Error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.detail)||error.message||'Failed to get user sessions');}},// Delete a session\nasync deleteSession(sessionId){try{await api.delete(\"/chat/sessions/\".concat(sessionId));}catch(error){var _error$response5,_error$response5$data;console.error('Error deleting session:',error);throw new Error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.detail)||error.message||'Failed to delete session');}}};","map":{"version":3,"names":["api","chatService","sendMessage","request","console","log","response","post","message","agent_type","agentType","session_id","sessionId","user_id","userId","data","timestamp","agent_used","sqlQuery","sql_query","sqlResult","sql_result","sources","tokenUsage","token_usage","contextUtilization","context_utilization","error","_error$response","_error$response$data","Error","detail","createSession","_error$response2","_error$response2$data","getHistory","get","concat","_error$response3","_error$response3$data","getUserSessions","_error$response4","_error$response4$data","deleteSession","delete","_error$response5","_error$response5$data"],"sources":["/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/src/services/chatService.ts"],"sourcesContent":["import api from './api';\nimport { ChatRequest, ChatResponse, Message } from '../types/api';\n\nexport const chatService = {\n  // Send a message to the chat assistant\n  async sendMessage(request: ChatRequest): Promise<ChatResponse> {\n    try {\n      console.log('Sending chat request:', request);\n      const response = await api.post<any>('/chat/', {\n        message: request.message,\n        agent_type: request.agentType,\n        session_id: request.sessionId,\n        user_id: request.userId\n      });\n      \n      console.log('Chat response:', response.data);\n      return {\n        message: response.data.message,\n        sessionId: response.data.session_id,\n        timestamp: response.data.timestamp,\n        agentType: response.data.agent_used,\n        sqlQuery: response.data.sql_query,\n        sqlResult: response.data.sql_result,\n        sources: response.data.sources,\n        tokenUsage: response.data.token_usage,\n        contextUtilization: response.data.context_utilization\n      };\n    } catch (error) {\n      console.error('Error sending chat message:', error);\n      throw new Error(\n        error.response?.data?.detail || \n        error.message || \n        'Failed to send message'\n      );\n    }\n  },\n\n  // Create a new chat session\n  async createSession(userId?: string): Promise<{ sessionId: string; message: string }> {\n    try {\n      const response = await api.post('/chat/sessions', { user_id: userId });\n      return {\n        sessionId: response.data.session_id,\n        message: response.data.message\n      };\n    } catch (error) {\n      console.error('Error creating session:', error);\n      throw new Error(\n        error.response?.data?.detail || \n        error.message || \n        'Failed to create session'\n      );\n    }\n  },\n\n  // Get session history\n  async getHistory(sessionId: string): Promise<{ messages: Message[] }> {\n    try {\n      const response = await api.get(`/chat/sessions/${sessionId}/messages`);\n      return response.data.data;\n    } catch (error) {\n      console.error('Error getting history:', error);\n      throw new Error(\n        error.response?.data?.detail || \n        error.message || \n        'Failed to get history'\n      );\n    }\n  },\n\n  // Get all sessions for a user\n  async getUserSessions(userId: string): Promise<{ sessions: any[] }> {\n    try {\n      const response = await api.get(`/chat/sessions/${userId}`);\n      return response.data.data;\n    } catch (error) {\n      console.error('Error getting user sessions:', error);\n      throw new Error(\n        error.response?.data?.detail || \n        error.message || \n        'Failed to get user sessions'\n      );\n    }\n  },\n\n  // Delete a session\n  async deleteSession(sessionId: string): Promise<void> {\n    try {\n      await api.delete(`/chat/sessions/${sessionId}`);\n    } catch (error) {\n      console.error('Error deleting session:', error);\n      throw new Error(\n        error.response?.data?.detail || \n        error.message || \n        'Failed to delete session'\n      );\n    }\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}