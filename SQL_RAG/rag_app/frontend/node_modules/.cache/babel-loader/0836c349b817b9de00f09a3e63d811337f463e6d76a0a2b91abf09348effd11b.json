{"ast":null,"code":"import React,{useState}from'react';import'./DataTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DataTable=_ref=>{let{data,loading,error}=_ref;const[sortConfig,setSortConfig]=useState(null);// Calculate sorted data first (before early returns)\nconst sortedData=React.useMemo(()=>{if(!data||!data.data)return[];let sortableData=[...data.data];if(sortConfig!==null){sortableData.sort((a,b)=>{if(a[sortConfig.key]<b[sortConfig.key]){return sortConfig.direction==='asc'?-1:1;}if(a[sortConfig.key]>b[sortConfig.key]){return sortConfig.direction==='asc'?1:-1;}return 0;});}return sortableData;},[data,sortConfig]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-state\",children:\"Loading data...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-state\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Error executing query\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});}if(!data||!data.data||data.data.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"empty-state\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No data returned from query\"})})});}const handleSort=key=>{let direction='asc';if(sortConfig&&sortConfig.key===key&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({key,direction});};const columns=Object.keys(data.data[0]);const columnTypes=data.columnTypes||{};return/*#__PURE__*/_jsxs(\"div\",{className:\"data-table-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Query Results\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"table-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[data.totalRows.toLocaleString(),\" rows\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",data.cost.toFixed(4),\" cost\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[(data.bytesProcessed/1024/1024).toFixed(2),\" MB processed\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[data.executionTime.toFixed(2),\"s execution\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map(column=>/*#__PURE__*/_jsx(\"th\",{onClick:()=>handleSort(column),className:(sortConfig===null||sortConfig===void 0?void 0:sortConfig.key)===column?'sorted':'',children:/*#__PURE__*/_jsxs(\"div\",{className:\"column-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:column}),/*#__PURE__*/_jsx(\"span\",{className:\"column-type\",children:columnTypes[column]}),(sortConfig===null||sortConfig===void 0?void 0:sortConfig.key)===column&&/*#__PURE__*/_jsx(\"span\",{className:\"sort-direction\",children:sortConfig.direction==='asc'?'↑':'↓'})]})},column))})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedData.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{className:index%2===0?'even':'odd',children:columns.map(column=>/*#__PURE__*/_jsx(\"td\",{children:row[column]===null?/*#__PURE__*/_jsx(\"span\",{className:\"null-value\",children:\"NULL\"}):String(row[column])},column))},index))})]})}),data.totalRows>100&&/*#__PURE__*/_jsx(\"div\",{className:\"pagination-info\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Showing \",sortedData.length,\" of \",data.totalRows.toLocaleString(),\" rows\"]})})]});};export default DataTable;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","DataTable","_ref","data","loading","error","sortConfig","setSortConfig","sortedData","useMemo","sortableData","sort","a","b","key","direction","className","children","length","handleSort","columns","Object","keys","columnTypes","totalRows","toLocaleString","cost","toFixed","bytesProcessed","executionTime","map","column","onClick","row","index","String"],"sources":["/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/src/components/data/DataTable.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { SQLExecuteResponse } from '../../types/api';\nimport './DataTable.css';\n\ninterface DataTableProps {\n  data: SQLExecuteResponse | null;\n  loading?: boolean;\n  error?: string | null;\n}\n\nconst DataTable: React.FC<DataTableProps> = ({ data, loading, error }) => {\n  const [sortConfig, setSortConfig] = useState<{\n    key: string;\n    direction: 'asc' | 'desc';\n  } | null>(null);\n\n  // Calculate sorted data first (before early returns)\n  const sortedData = React.useMemo(() => {\n    if (!data || !data.data) return [];\n    \n    let sortableData = [...data.data];\n    if (sortConfig !== null) {\n      sortableData.sort((a, b) => {\n        if (a[sortConfig.key] < b[sortConfig.key]) {\n          return sortConfig.direction === 'asc' ? -1 : 1;\n        }\n        if (a[sortConfig.key] > b[sortConfig.key]) {\n          return sortConfig.direction === 'asc' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableData;\n  }, [data, sortConfig]);\n\n  if (loading) {\n    return (\n      <div className=\"data-table-container\">\n        <div className=\"loading-state\">Loading data...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"data-table-container\">\n        <div className=\"error-state\">\n          <h4>Error executing query</h4>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!data || !data.data || data.data.length === 0) {\n    return (\n      <div className=\"data-table-container\">\n        <div className=\"empty-state\">\n          <p>No data returned from query</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSort = (key: string) => {\n    let direction: 'asc' | 'desc' = 'asc';\n    if (sortConfig && sortConfig.key === key && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ key, direction });\n  };\n\n  const columns = Object.keys(data.data[0]);\n  const columnTypes = data.columnTypes || {};\n\n  return (\n    <div className=\"data-table-container\">\n      <div className=\"table-header\">\n        <h3>Query Results</h3>\n        <div className=\"table-stats\">\n          <span>{data.totalRows.toLocaleString()} rows</span>\n          <span>${data.cost.toFixed(4)} cost</span>\n          <span>{(data.bytesProcessed / 1024 / 1024).toFixed(2)} MB processed</span>\n          <span>{data.executionTime.toFixed(2)}s execution</span>\n        </div>\n      </div>\n\n      <div className=\"table-wrapper\">\n        <table className=\"data-table\">\n          <thead>\n            <tr>\n              {columns.map((column) => (\n                <th \n                  key={column} \n                  onClick={() => handleSort(column)}\n                  className={sortConfig?.key === column ? 'sorted' : ''}\n                >\n                  <div className=\"column-header\">\n                    <span>{column}</span>\n                    <span className=\"column-type\">{columnTypes[column]}</span>\n                    {sortConfig?.key === column && (\n                      <span className=\"sort-direction\">\n                        {sortConfig.direction === 'asc' ? '↑' : '↓'}\n                      </span>\n                    )}\n                  </div>\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {sortedData.map((row, index) => (\n              <tr key={index} className={index % 2 === 0 ? 'even' : 'odd'}>\n                {columns.map((column) => (\n                  <td key={column}>\n                    {row[column] === null ? (\n                      <span className=\"null-value\">NULL</span>\n                    ) : (\n                      String(row[column])\n                    )}\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {data.totalRows > 100 && (\n        <div className=\"pagination-info\">\n          <p>Showing {sortedData.length} of {data.totalRows.toLocaleString()} rows</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DataTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}