{"ast":null,"code":"import _objectSpread from\"/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{dataService}from'../services/dataService';const initialState={schema:[],queries:[],analytics:null,isLoading:false,error:null,pagination:{page:1,pageSize:50,total:0},filters:{search:'',tables:[],hasJoins:null}};export const fetchSchema=createAsyncThunk('data/fetchSchema',async()=>{const response=await dataService.getSchema();return response;});export const fetchQueries=createAsyncThunk('data/fetchQueries',async params=>{const response=await dataService.getQueries(params);return response;});export const fetchAnalytics=createAsyncThunk('data/fetchAnalytics',async()=>{const response=await dataService.getAnalytics();return response;});const dataSlice=createSlice({name:'data',initialState,reducers:{setFilters:(state,action)=>{state.filters=_objectSpread(_objectSpread({},state.filters),action.payload);},setPagination:(state,action)=>{state.pagination=_objectSpread(_objectSpread({},state.pagination),action.payload);},clearError:state=>{state.error=null;}},extraReducers:builder=>{builder.addCase(fetchSchema.pending,state=>{state.isLoading=true;state.error=null;}).addCase(fetchSchema.fulfilled,(state,action)=>{state.isLoading=false;state.schema=action.payload;}).addCase(fetchSchema.rejected,(state,action)=>{state.isLoading=false;state.error=action.error.message||'Failed to fetch schema';}).addCase(fetchQueries.pending,state=>{state.isLoading=true;state.error=null;}).addCase(fetchQueries.fulfilled,(state,action)=>{state.isLoading=false;state.queries=action.payload.queries;state.pagination=_objectSpread(_objectSpread({},state.pagination),{},{total:action.payload.total});}).addCase(fetchQueries.rejected,(state,action)=>{state.isLoading=false;state.error=action.error.message||'Failed to fetch queries';}).addCase(fetchAnalytics.pending,state=>{state.isLoading=true;state.error=null;}).addCase(fetchAnalytics.fulfilled,(state,action)=>{state.isLoading=false;state.analytics=action.payload;}).addCase(fetchAnalytics.rejected,(state,action)=>{state.isLoading=false;state.error=action.error.message||'Failed to fetch analytics';});}});export const{setFilters,setPagination,clearError}=dataSlice.actions;export default dataSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","dataService","initialState","schema","queries","analytics","isLoading","error","pagination","page","pageSize","total","filters","search","tables","hasJoins","fetchSchema","response","getSchema","fetchQueries","params","getQueries","fetchAnalytics","getAnalytics","dataSlice","name","reducers","setFilters","state","action","_objectSpread","payload","setPagination","clearError","extraReducers","builder","addCase","pending","fulfilled","rejected","message","actions","reducer"],"sources":["/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/src/store/dataSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { QueryItem, TableSchema } from '../types/api';\nimport { dataService } from '../services/dataService';\n\ninterface DataState {\n  schema: TableSchema[];\n  queries: QueryItem[];\n  analytics: any;\n  isLoading: boolean;\n  error: string | null;\n  pagination: {\n    page: number;\n    pageSize: number;\n    total: number;\n  };\n  filters: {\n    search: string;\n    tables: string[];\n    hasJoins: boolean | null;\n  };\n}\n\nconst initialState: DataState = {\n  schema: [],\n  queries: [],\n  analytics: null,\n  isLoading: false,\n  error: null,\n  pagination: {\n    page: 1,\n    pageSize: 50,\n    total: 0,\n  },\n  filters: {\n    search: '',\n    tables: [],\n    hasJoins: null,\n  },\n};\n\nexport const fetchSchema = createAsyncThunk(\n  'data/fetchSchema',\n  async () => {\n    const response = await dataService.getSchema();\n    return response;\n  }\n);\n\nexport const fetchQueries = createAsyncThunk(\n  'data/fetchQueries',\n  async (params: {\n    search?: string;\n    page?: number;\n    pageSize?: number;\n    filters?: any;\n  }) => {\n    const response = await dataService.getQueries(params);\n    return response;\n  }\n);\n\nexport const fetchAnalytics = createAsyncThunk(\n  'data/fetchAnalytics',\n  async () => {\n    const response = await dataService.getAnalytics();\n    return response;\n  }\n);\n\nconst dataSlice = createSlice({\n  name: 'data',\n  initialState,\n  reducers: {\n    setFilters: (state, action: PayloadAction<Partial<DataState['filters']>>) => {\n      state.filters = { ...state.filters, ...action.payload };\n    },\n    setPagination: (state, action: PayloadAction<Partial<DataState['pagination']>>) => {\n      state.pagination = { ...state.pagination, ...action.payload };\n    },\n    clearError: (state) => {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchSchema.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchSchema.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.schema = action.payload;\n      })\n      .addCase(fetchSchema.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch schema';\n      })\n      .addCase(fetchQueries.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchQueries.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.queries = action.payload.queries;\n        state.pagination = {\n          ...state.pagination,\n          total: action.payload.total,\n        };\n      })\n      .addCase(fetchQueries.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch queries';\n      })\n      .addCase(fetchAnalytics.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchAnalytics.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.analytics = action.payload;\n      })\n      .addCase(fetchAnalytics.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch analytics';\n      });\n  },\n});\n\nexport const { setFilters, setPagination, clearError } = dataSlice.actions;\nexport default dataSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}