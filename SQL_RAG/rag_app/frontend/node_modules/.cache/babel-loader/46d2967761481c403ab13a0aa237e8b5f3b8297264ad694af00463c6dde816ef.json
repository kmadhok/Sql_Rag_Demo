{"ast":null,"code":"import React,{useState}from'react';import'./DataTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DataTable=_ref=>{let{data,isLoading=false,error=null}=_ref;const[sortConfig,setSortConfig]=useState({key:null,direction:'asc'});const handleSort=column=>{let direction='asc';if(sortConfig.key===column&&sortConfig.direction==='asc'){direction='desc';}setSortConfig({key:column,direction});};const sortedData=React.useMemo(()=>{if(!(data!==null&&data!==void 0&&data.data)||!sortConfig.key)return(data===null||data===void 0?void 0:data.data)||[];return[...data.data].sort((a,b)=>{const aValue=a[sortConfig.key];const bValue=b[sortConfig.key];if(aValue<bValue){return sortConfig.direction==='asc'?-1:1;}if(aValue>bValue){return sortConfig.direction==='asc'?1:-1;}return 0;});},[data===null||data===void 0?void 0:data.data,sortConfig]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table loading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Executing query...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table error\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u274C Query Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error})]})});}if(!data||!data.success){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table empty\",children:/*#__PURE__*/_jsx(\"div\",{className:\"empty-message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Execute a query to see results here\"})})});}if(!data.data||data.data.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"data-table empty\",children:/*#__PURE__*/_jsx(\"div\",{className:\"empty-message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Query executed successfully, but no results returned\"})})});}const columns=data.columns||[];const rows=sortedData;return/*#__PURE__*/_jsxs(\"div\",{className:\"data-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-info\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"row-count\",children:[rows.length,\" row\",rows.length!==1?'s':'',\" returned\"]}),data.executionTime&&/*#__PURE__*/_jsxs(\"span\",{className:\"execution-time\",children:[\"in \",data.executionTime.toFixed(3),\"s\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-container\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:columns.map((column,index)=>/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort(column),className:sortConfig.key===column?sortConfig.direction:'',children:[column,sortConfig.key===column&&/*#__PURE__*/_jsx(\"span\",{className:\"sort-indicator\",children:sortConfig.direction==='asc'?' ↑':' ↓'})]},index))})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map((row,rowIndex)=>/*#__PURE__*/_jsx(\"tr\",{children:columns.map((_,colIndex)=>{var _row$colIndex;return/*#__PURE__*/_jsx(\"td\",{children:typeof row[colIndex]==='object'?JSON.stringify(row[colIndex]):String((_row$colIndex=row[colIndex])!==null&&_row$colIndex!==void 0?_row$colIndex:'')},colIndex);})},rowIndex))})]})}),rows.length>50&&/*#__PURE__*/_jsx(\"div\",{className:\"table-footer\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"truncated-notice\",children:[\"Showing first 50 rows of \",rows.length,\" total rows\"]})})]});};export default DataTable;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","DataTable","_ref","data","isLoading","error","sortConfig","setSortConfig","key","direction","handleSort","column","sortedData","useMemo","sort","a","b","aValue","bValue","className","children","success","length","columns","rows","executionTime","toFixed","map","index","onClick","row","rowIndex","_","colIndex","_row$colIndex","JSON","stringify","String"],"sources":["/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/src/components/data/DataTable.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ExecuteSQLResponse } from '../../types/api';\nimport './DataTable.css';\n\ninterface DataTableProps {\n  data: ExecuteSQLResponse | null;\n  isLoading?: boolean;\n  error?: string | null;\n}\n\nconst DataTable: React.FC<DataTableProps> = ({ \n  data, \n  isLoading = false, \n  error = null \n}) => {\n  const [sortConfig, setSortConfig] = useState<{\n    key: string | null;\n    direction: 'asc' | 'desc';\n  }>({ key: null, direction: 'asc' });\n\n  const handleSort = (column: string) => {\n    let direction: 'asc' | 'desc' = 'asc';\n    if (sortConfig.key === column && sortConfig.direction === 'asc') {\n      direction = 'desc';\n    }\n    setSortConfig({ key: column, direction });\n  };\n\n  const sortedData = React.useMemo(() => {\n    if (!data?.data || !sortConfig.key) return data?.data || [];\n\n    return [...data.data].sort((a, b) => {\n      const aValue = a[sortConfig.key as number];\n      const bValue = b[sortConfig.key as number];\n      \n      if (aValue < bValue) {\n        return sortConfig.direction === 'asc' ? -1 : 1;\n      }\n      if (aValue > bValue) {\n        return sortConfig.direction === 'asc' ? 1 : -1;\n      }\n      return 0;\n    });\n  }, [data?.data, sortConfig]);\n\n  if (isLoading) {\n    return (\n      <div className=\"data-table loading\">\n        <div className=\"loading-spinner\">\n          <div className=\"spinner\"></div>\n          <p>Executing query...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"data-table error\">\n        <div className=\"error-message\">\n          <h3>❌ Query Error</h3>\n          <p>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!data || !data.success) {\n    return (\n      <div className=\"data-table empty\">\n        <div className=\"empty-message\">\n          <p>Execute a query to see results here</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!data.data || data.data.length === 0) {\n    return (\n      <div className=\"data-table empty\">\n        <div className=\"empty-message\">\n          <p>Query executed successfully, but no results returned</p>\n        </div>\n      </div>\n    );\n  }\n\n  const columns = data.columns || [];\n  const rows = sortedData;\n\n  return (\n    <div className=\"data-table\">\n      <div className=\"table-info\">\n        <span className=\"row-count\">\n          {rows.length} row{rows.length !== 1 ? 's' : ''} returned\n        </span>\n        {data.executionTime && (\n          <span className=\"execution-time\">\n            in {data.executionTime.toFixed(3)}s\n          </span>\n        )}\n      </div>\n\n      <div className=\"table-container\">\n        <table>\n          <thead>\n            <tr>\n              {columns.map((column, index) => (\n                <th \n                  key={index}\n                  onClick={() => handleSort(column)}\n                  className={sortConfig.key === column ? sortConfig.direction : ''}\n                >\n                  {column}\n                  {sortConfig.key === column && (\n                    <span className=\"sort-indicator\">\n                      {sortConfig.direction === 'asc' ? ' ↑' : ' ↓'}\n                    </span>\n                  )}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map((row, rowIndex) => (\n              <tr key={rowIndex}>\n                {columns.map((_, colIndex) => (\n                  <td key={colIndex}>\n                    {typeof row[colIndex] === 'object' \n                      ? JSON.stringify(row[colIndex]) \n                      : String(row[colIndex] ?? '')\n                    }\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {rows.length > 50 && (\n        <div className=\"table-footer\">\n          <p className=\"truncated-notice\">\n            Showing first 50 rows of {rows.length} total rows\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DataTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}