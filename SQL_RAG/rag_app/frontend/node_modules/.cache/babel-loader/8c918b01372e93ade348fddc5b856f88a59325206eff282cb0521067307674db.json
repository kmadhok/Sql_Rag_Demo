{"ast":null,"code":"import _objectSpread from\"/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{dataService}from'../services/dataService';const initialState={schema:null,queries:[],analytics:null,isLoading:false,error:null,pagination:{page:1,pageSize:20,total:0},filters:{search:'',tables:[],hasJoins:null}};// Async thunks\nexport const fetchSchema=createAsyncThunk('data/fetchSchema',async()=>{const response=await dataService.getDatabaseSchema();return response;});export const fetchQueries=createAsyncThunk('data/fetchQueries',async params=>{const response=await dataService.getQueries(params);return response;});export const executeQuery=createAsyncThunk('data/executeQuery',async params=>{const response=await dataService.executeQuery(params);return response;});const dataSlice=createSlice({name:'data',initialState,reducers:{setFilters:(state,action)=>{state.filters=_objectSpread(_objectSpread({},state.filters),action.payload);},setPagination:(state,action)=>{state.pagination=_objectSpread(_objectSpread({},state.pagination),action.payload);},clearError:state=>{state.error=null;}},extraReducers:builder=>{// fetchSchema\nbuilder.addCase(fetchSchema.pending,state=>{state.isLoading=true;state.error=null;}).addCase(fetchSchema.fulfilled,(state,action)=>{state.isLoading=false;state.schema=action.payload;}).addCase(fetchSchema.rejected,(state,action)=>{state.isLoading=false;state.error=action.error.message||'Failed to fetch schema';});// fetchQueries\nbuilder.addCase(fetchQueries.pending,state=>{state.isLoading=true;state.error=null;}).addCase(fetchQueries.fulfilled,(state,action)=>{state.isLoading=false;state.queries=action.payload.queries;state.pagination.total=action.payload.count;}).addCase(fetchQueries.rejected,(state,action)=>{state.isLoading=false;state.error=action.error.message||'Failed to fetch queries';});// executeQuery\nbuilder.addCase(executeQuery.pending,state=>{state.isLoading=true;state.error=null;}).addCase(executeQuery.fulfilled,(state,action)=>{state.isLoading=false;// Handle query results if needed\n}).addCase(executeQuery.rejected,(state,action)=>{state.isLoading=false;state.error=action.error.message||'Failed to execute query';});}});export const{setFilters,setPagination,clearError}=dataSlice.actions;export default dataSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","dataService","initialState","schema","queries","analytics","isLoading","error","pagination","page","pageSize","total","filters","search","tables","hasJoins","fetchSchema","response","getDatabaseSchema","fetchQueries","params","getQueries","executeQuery","dataSlice","name","reducers","setFilters","state","action","_objectSpread","payload","setPagination","clearError","extraReducers","builder","addCase","pending","fulfilled","rejected","message","count","actions","reducer"],"sources":["/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/src/store/dataSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { QueryItem, DatabaseSchema } from '../types/api';\nimport { dataService } from '../services/dataService';\n\ninterface DataState {\n  schema: DatabaseSchema | null;\n  queries: QueryItem[];\n  analytics: any;\n  isLoading: boolean;\n  error: string | null;\n  pagination: {\n    page: number;\n    pageSize: number;\n    total: number;\n  };\n  filters: {\n    search: string;\n    tables: string[];\n    hasJoins: boolean | null;\n  };\n}\n\nconst initialState: DataState = {\n  schema: null,\n  queries: [],\n  analytics: null,\n  isLoading: false,\n  error: null,\n  pagination: {\n    page: 1,\n    pageSize: 20,\n    total: 0\n  },\n  filters: {\n    search: '',\n    tables: [],\n    hasJoins: null\n  }\n};\n\n// Async thunks\nexport const fetchSchema = createAsyncThunk(\n  'data/fetchSchema',\n  async () => {\n    const response = await dataService.getDatabaseSchema();\n    return response;\n  }\n);\n\nexport const fetchQueries = createAsyncThunk(\n  'data/fetchQueries',\n  async (params: { search?: string; limit?: number }) => {\n    const response = await dataService.getQueries(params);\n    return response;\n  }\n);\n\nexport const executeQuery = createAsyncThunk(\n  'data/executeQuery',\n  async (params: { sql: string; dryRun?: boolean }) => {\n    const response = await dataService.executeQuery(params);\n    return response;\n  }\n);\n\nconst dataSlice = createSlice({\n  name: 'data',\n  initialState,\n  reducers: {\n    setFilters: (state, action: PayloadAction<Partial<DataState['filters']>>) => {\n      state.filters = { ...state.filters, ...action.payload };\n    },\n    setPagination: (state, action: PayloadAction<Partial<DataState['pagination']>>) => {\n      state.pagination = { ...state.pagination, ...action.payload };\n    },\n    clearError: (state) => {\n      state.error = null;\n    }\n  },\n  extraReducers: (builder) => {\n    // fetchSchema\n    builder\n      .addCase(fetchSchema.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchSchema.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.schema = action.payload;\n      })\n      .addCase(fetchSchema.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch schema';\n      });\n    \n    // fetchQueries\n    builder\n      .addCase(fetchQueries.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchQueries.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.queries = action.payload.queries;\n        state.pagination.total = action.payload.count;\n      })\n      .addCase(fetchQueries.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch queries';\n      });\n    \n    // executeQuery\n    builder\n      .addCase(executeQuery.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(executeQuery.fulfilled, (state, action) => {\n        state.isLoading = false;\n        // Handle query results if needed\n      })\n      .addCase(executeQuery.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to execute query';\n      });\n  }\n});\n\nexport const { setFilters, setPagination, clearError } = dataSlice.actions;\nexport default dataSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}