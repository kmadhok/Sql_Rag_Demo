{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { dataService } from '../services/dataService';\nconst initialState = {\n  schema: [],\n  queries: [],\n  analytics: null,\n  isLoading: false,\n  error: null,\n  pagination: {\n    page: 1,\n    pageSize: 50,\n    total: 0\n  },\n  filters: {\n    search: '',\n    tables: [],\n    hasJoins: null\n  }\n};\nexport const fetchSchema = createAsyncThunk('data/fetchSchema', async () => {\n  const response = await dataService.getSchema();\n  return response;\n});\nexport const fetchQueries = createAsyncThunk('data/fetchQueries', async params => {\n  const response = await dataService.getQueries(params);\n  return response;\n});\nexport const fetchAnalytics = createAsyncThunk('data/fetchAnalytics', async () => {\n  const response = await dataService.getAnalytics();\n  return response;\n});\nconst dataSlice = createSlice({\n  name: 'data',\n  initialState,\n  reducers: {\n    setFilters: (state, action) => {\n      state.filters = {\n        ...state.filters,\n        ...action.payload\n      };\n    },\n    setPagination: (state, action) => {\n      state.pagination = {\n        ...state.pagination,\n        ...action.payload\n      };\n    },\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchSchema.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(fetchSchema.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.schema = action.payload;\n    }).addCase(fetchSchema.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message || 'Failed to fetch schema';\n    }).addCase(fetchQueries.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(fetchQueries.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.queries = action.payload.queries;\n      state.pagination = {\n        ...state.pagination,\n        total: action.payload.total\n      };\n    }).addCase(fetchQueries.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message || 'Failed to fetch queries';\n    }).addCase(fetchAnalytics.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(fetchAnalytics.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.analytics = action.payload;\n    }).addCase(fetchAnalytics.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.error.message || 'Failed to fetch analytics';\n    });\n  }\n});\nexport const {\n  setFilters,\n  setPagination,\n  clearError\n} = dataSlice.actions;\nexport default dataSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","dataService","initialState","schema","queries","analytics","isLoading","error","pagination","page","pageSize","total","filters","search","tables","hasJoins","fetchSchema","response","getSchema","fetchQueries","params","getQueries","fetchAnalytics","getAnalytics","dataSlice","name","reducers","setFilters","state","action","payload","setPagination","clearError","extraReducers","builder","addCase","pending","fulfilled","rejected","message","actions","reducer"],"sources":["/Users/kanumadhok/Downloads/code/Sql_Rag_Demo/SQL_RAG/rag_app/frontend/src/store/dataSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { QueryItem, TableSchema } from '../types/api';\nimport { dataService } from '../services/dataService';\n\ninterface DataState {\n  schema: TableSchema[];\n  queries: QueryItem[];\n  analytics: any;\n  isLoading: boolean;\n  error: string | null;\n  pagination: {\n    page: number;\n    pageSize: number;\n    total: number;\n  };\n  filters: {\n    search: string;\n    tables: string[];\n    hasJoins: boolean | null;\n  };\n}\n\nconst initialState: DataState = {\n  schema: [],\n  queries: [],\n  analytics: null,\n  isLoading: false,\n  error: null,\n  pagination: {\n    page: 1,\n    pageSize: 50,\n    total: 0,\n  },\n  filters: {\n    search: '',\n    tables: [],\n    hasJoins: null,\n  },\n};\n\nexport const fetchSchema = createAsyncThunk(\n  'data/fetchSchema',\n  async () => {\n    const response = await dataService.getSchema();\n    return response;\n  }\n);\n\nexport const fetchQueries = createAsyncThunk(\n  'data/fetchQueries',\n  async (params: {\n    search?: string;\n    page?: number;\n    pageSize?: number;\n    filters?: any;\n  }) => {\n    const response = await dataService.getQueries(params);\n    return response;\n  }\n);\n\nexport const fetchAnalytics = createAsyncThunk(\n  'data/fetchAnalytics',\n  async () => {\n    const response = await dataService.getAnalytics();\n    return response;\n  }\n);\n\nconst dataSlice = createSlice({\n  name: 'data',\n  initialState,\n  reducers: {\n    setFilters: (state, action: PayloadAction<Partial<DataState['filters']>>) => {\n      state.filters = { ...state.filters, ...action.payload };\n    },\n    setPagination: (state, action: PayloadAction<Partial<DataState['pagination']>>) => {\n      state.pagination = { ...state.pagination, ...action.payload };\n    },\n    clearError: (state) => {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchSchema.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchSchema.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.schema = action.payload;\n      })\n      .addCase(fetchSchema.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch schema';\n      })\n      .addCase(fetchQueries.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchQueries.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.queries = action.payload.queries;\n        state.pagination = {\n          ...state.pagination,\n          total: action.payload.total,\n        };\n      })\n      .addCase(fetchQueries.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch queries';\n      })\n      .addCase(fetchAnalytics.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(fetchAnalytics.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.analytics = action.payload;\n      })\n      .addCase(fetchAnalytics.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.error.message || 'Failed to fetch analytics';\n      });\n  },\n});\n\nexport const { setFilters, setPagination, clearError } = dataSlice.actions;\nexport default dataSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}