ERROR:utils.rate_limiter:API error: 504 Deadline Exceeded
=== SQL METADATA GENERATOR WITH RATE LIMITING ===
Using model: gemini-2.5-flash-lite
Rate limits: 15 RPM, 250K TPM, 1K RPD

üîß CSV MODE: Processing file data_new/sample_queries.csv
üìÅ Input: data_new/sample_queries.csv
üìÅ Output: data_new/enhanced_sample_queries.csv
üîç Query column: Queries

üìÇ Loading queries from CSV...
üìÑ Loaded CSV with 100 rows and columns: ['Queries']
‚úÖ Successfully loaded 100 unique, valid queries from CSV
üìä Found 100 queries to process
Loaded checkpoint: 67 items already processed

=== STARTING METADATA GENERATION ===
Features enabled:
‚úÖ Rate limiting (15 RPM)
‚úÖ Adaptive concurrency
‚úÖ Exponential backoff
‚úÖ Progress checkpointing
‚úÖ Error recovery
Loaded checkpoint: 67 items already processed
Processing 100 queries with adaptive concurrency (starting with 2)...
Resuming from checkpoint: 67/100 already processed
Remaining items to process: 31
Processing 31 remaining queries...

Processing batch of 2 queries (batch 1)
Current concurrency: 2
Rate limiter stats - RPM: 0/15, Success rate: 0.0%

=== PROGRESS UPDATE ===
Processed: 67/100 (67.0%)
Successful: 67
Failed: 0
Success Rate: 100.0%
Elapsed: 33m 13s
ETA: 16m 22s
Processing query 68/100...
Completed query 68 (tokens: 1102)
Processing query 69/100...
Completed query 69 (tokens: 1125)

Processing batch of 2 queries (batch 2)
Current concurrency: 2
Rate limiter stats - RPM: 2/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 69/100 (69.0%)
Successful: 69
Failed: 0
Success Rate: 100.0%
Elapsed: 33m 26s
ETA: 15m 1s
Processing query 70/100...
Completed query 70 (tokens: 2582)
Processing query 71/100...
Completed query 71 (tokens: 3110)

Processing batch of 2 queries (batch 3)
Current concurrency: 2
Rate limiter stats - RPM: 4/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 71/100 (71.0%)
Successful: 71
Failed: 0
Success Rate: 100.0%
Elapsed: 34m 58s
ETA: 14m 53s
Processing query 72/100...
Completed query 72 (tokens: 1634)
Processing query 73/100...
Completed query 73 (tokens: 811)

Processing batch of 2 queries (batch 4)
Current concurrency: 2
Rate limiter stats - RPM: 6/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 73/100 (73.0%)
Successful: 73
Failed: 0
Success Rate: 100.0%
Elapsed: 34m 12s
ETA: 13m 39s
Processing query 74/100...
Completed query 74 (tokens: 2376)
Processing query 75/100...
Completed query 75 (tokens: 1010)

Processing batch of 2 queries (batch 5)
Current concurrency: 2
Rate limiter stats - RPM: 6/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 75/100 (75.0%)
Successful: 75
Failed: 0
Success Rate: 100.0%
Elapsed: 35m 31s
ETA: 12m 30s
Processing query 76/100...
Completed query 76 (tokens: 3776)
Processing query 77/100...
Completed query 77 (tokens: 2804)

Processing batch of 2 queries (batch 6)
Current concurrency: 2
Rate limiter stats - RPM: 5/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 77/100 (77.0%)
Successful: 77
Failed: 0
Success Rate: 100.0%
Elapsed: 35m 9s
ETA: 11m 30s
Processing query 78/100...
Completed query 78 (tokens: 4336)
Processing query 79/100...
Completed query 79 (tokens: 2226)

Processing batch of 2 queries (batch 7)
Current concurrency: 2
Rate limiter stats - RPM: 4/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 79/100 (79.0%)
Successful: 79
Failed: 0
Success Rate: 100.0%
Elapsed: 36m 45s
ETA: 10m 30s
Processing query 80/100...
Completed query 80 (tokens: 6292)
Processing query 81/100...
Completed query 81 (tokens: 743)

Processing batch of 2 queries (batch 8)
Current concurrency: 2
Rate limiter stats - RPM: 4/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 81/100 (81.0%)
Successful: 81
Failed: 0
Success Rate: 100.0%
Elapsed: 36m 28s
ETA: 9m 33s
Processing query 82/100...
Completed query 82 (tokens: 1868)
Processing query 83/100...
Completed query 83 (tokens: 3746)

Processing batch of 2 queries (batch 9)
Current concurrency: 2
Rate limiter stats - RPM: 4/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 83/100 (83.0%)
Successful: 83
Failed: 0
Success Rate: 100.0%
Elapsed: 37m 1s
ETA: 8m 35s
Processing query 84/100...
Completed query 84 (tokens: 1693)
Processing query 85/100...
Completed query 85 (tokens: 1765)

Processing batch of 2 queries (batch 10)
Current concurrency: 2
Rate limiter stats - RPM: 6/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 85/100 (85.0%)
Successful: 85
Failed: 0
Success Rate: 100.0%
Elapsed: 37m 18s
ETA: 7m 35s
Processing query 87/100...
Completed query 87 (tokens: 1249)
Processing query 88/100...
Completed query 88 (tokens: 2245)

Processing batch of 2 queries (batch 11)
Current concurrency: 2
Rate limiter stats - RPM: 5/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 87/100 (87.0%)
Successful: 87
Failed: 0
Success Rate: 100.0%
Elapsed: 38m 41s
ETA: 6m 38s
Processing query 89/100...
Completed query 89 (tokens: 1320)
Processing query 91/100...
Completed query 91 (tokens: 1042)

Processing batch of 2 queries (batch 12)
Current concurrency: 2
Rate limiter stats - RPM: 7/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 89/100 (89.0%)
Successful: 89
Failed: 0
Success Rate: 100.0%
Elapsed: 38m 54s
ETA: 5m 41s
Processing query 92/100...
Completed query 92 (tokens: 3810)
Processing query 93/100...
Completed query 93 (tokens: 1168)

Processing batch of 2 queries (batch 13)
Current concurrency: 2
Rate limiter stats - RPM: 6/15, Success rate: 100.0%

=== PROGRESS UPDATE ===
Processed: 91/100 (91.0%)
Successful: 91
Failed: 0
Success Rate: 100.0%
Elapsed: 38m 23s
ETA: 4m 48s
Processing query 94/100...
Completed query 94 (tokens: 1786)
Processing query 95/100...
Error on query 95: 504 Deadline Exceeded

Processing batch of 2 queries (batch 14)
Current concurrency: 2
Rate limiter stats - RPM: 0/15, Success rate: 96.2%

=== PROGRESS UPDATE ===
Processed: 93/100 (93.0%)
Successful: 93
Failed: 0
Success Rate: 100.0%
Elapsed: 50m 9s
ETA: 4m 46s
Processing query 96/100...
Completed query 96 (tokens: 1233)
Processing query 97/100...
Completed query 97 (tokens: 1597)

Processing batch of 2 queries (batch 15)
Current concurrency: 2
Rate limiter stats - RPM: 2/15, Success rate: 96.4%

=== PROGRESS UPDATE ===
Processed: 95/100 (95.0%)
Successful: 95
Failed: 0
Success Rate: 100.0%
Elapsed: 50m 25s
ETA: 3m 39s
Processing query 98/100...
Completed query 98 (tokens: 943)
Processing query 99/100...
Completed query 99 (tokens: 600)

Processing batch of 1 queries (batch 16)
Current concurrency: 2
Rate limiter stats - RPM: 4/15, Success rate: 96.7%

=== PROGRESS UPDATE ===
Processed: 97/100 (97.0%)
Successful: 97
Failed: 0
Success Rate: 100.0%
Elapsed: 51m 34s
ETA: 2m 34s
Processing query 100/100...
Completed query 100 (tokens: 1576)

=== BATCH PROCESSING COMPLETE ===
Final success rate: 96.8%
Total requests: 30
Total errors: 1

üíæ Saving results to CSV...
üìä Generated metadata for 31 queries
üîó Merging results with original data to preserve all columns...
‚úÖ Merged results saved to: data_new/enhanced_sample_queries.csv
üìã Final CSV has 100 rows and 7 columns
üìã Detailed results also saved to: data_new/enhanced_sample_queries_detailed_results.json
Final results saved to: checkpoints/sql_metadata_generation_results.json

=== PROCESSING SUMMARY ===
‚úÖ Generated metadata for 31 queries
‚úÖ Used 61,568 total tokens
‚úÖ Success rate: 96.8%
‚úÖ Results saved to: data_new/enhanced_sample_queries.csv

üöÄ Next step: Run embedding generator with your enhanced CSV file:
   python standalone_embedding_generator.py --csv "data_new/enhanced_sample_queries.csv"
